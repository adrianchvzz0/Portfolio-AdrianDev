<header
    id="header"
    class="fixed mx-4 my-2 top-0 left-0 right-0 z-50 transition-all duration-500 backdrop-blur-none bg-transparent"
>
    <div
        class="flex justify-between items-center py-2 md:py-4 px-4 sm:px-6 md:px-8 lg:px-10 w-full max-w-[1000px] mx-auto"
    >
        <a href="#home">
            <img
                class="rounded-full w-8 h-auto md:w-12 md:h-auto lg:w-12 lg:h-auto"
                src="/images/logo.webp"
                alt="Adrian Dev Foto"
            />
        </a>

        <!-- Menú de navegación para pantallas medianas y grandes -->
        <nav class="hidden sm:flex flex-row gap-x-4 sm:gap-x-8 md:gap-x-10">
            <a
                href="#home"
                class="text-sm sm:text-base opacity-80 hover:opacity-100 hover:text-purple-400 transition"
            >
                Home
            </a>
            <a
                href="#skills"
                class="text-sm sm:text-base opacity-80 hover:opacity-100 hover:text-purple-400 transition"
            >
                Skills
            </a>
            <a
                href="#projects"
                class="text-sm sm:text-base opacity-80 hover:opacity-100 hover:text-purple-400 transition"
            >
                Projects
            </a>
            <a
                href="#about"
                class="text-sm sm:text-base opacity-80 hover:opacity-100 hover:text-purple-400 transition"
            >
                About
            </a>
            <a
                href="#contact"
                class="text-sm sm:text-base opacity-80 hover:opacity-100 hover:text-purple-400 transition"
            >
                Contact
            </a>
        </nav>

        <!-- Botón de menú para móviles -->
        <button id="mobile-menu-button" class="sm:hidden text-white p-2">
            <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </div>

    <!-- Menú móvil desplegable -->
    <div
        id="mobile-menu"
        class="sm:hidden fixed right-4 top-16 bg-black/70 backdrop-blur-md p-4 rounded-lg shadow-lg w-[200px] transform transition-all duration-300 ease-in-out origin-top opacity-0 scale-y-0 pointer-events-none"
    >
        <div class="flex flex-col space-y-4">
            <a
                href="#home"
                class="text-sm opacity-80 hover:opacity-100 hover:text-purple-400 transition py-2"
            >
                Home
            </a>
            <a
                href="#skills"
                class="text-sm opacity-80 hover:opacity-100 hover:text-purple-400 transition py-2"
            >
                Skills
            </a>
            <a
                href="#projects"
                class="text-sm opacity-80 hover:opacity-100 hover:text-purple-400 transition py-2"
            >
                Projects
            </a>
            <a
                href="#about"
                class="text-sm opacity-80 hover:opacity-100 hover:text-purple-400 transition py-2"
            >
                About
            </a>
            <a
                href="#contact"
                class="text-sm opacity-80 hover:opacity-100 hover:text-purple-400 transition py-2"
            >
                Contact
            </a>
        </div>
    </div>
</header>

<script>
    const header = document.getElementById("header");
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const maxScroll = 250; // punto donde el efecto está al máximo

    // Funcionalidad del menú móvil
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener("click", () => {
            mobileMenu.classList.toggle("opacity-0");
            mobileMenu.classList.toggle("scale-y-0");
            mobileMenu.classList.toggle("pointer-events-none");
        });

        // Cerrar el menú al hacer clic en un enlace
        const mobileLinks = mobileMenu.querySelectorAll("a");
        mobileLinks.forEach((link) => {
            link.addEventListener("click", () => {
                mobileMenu.classList.add("opacity-0");
                mobileMenu.classList.add("scale-y-0");
                mobileMenu.classList.add("pointer-events-none");
            });
        });
    }

    // Efecto de scroll
    if (header) {
        window.addEventListener("scroll", () => {
            const scrollPercentage = Math.min(window.scrollY / maxScroll, 1);
            const blurValue = Math.floor(scrollPercentage * 6); // máximo blur de 6px
            const bgOpacity = Math.floor(scrollPercentage * 20); // máximo 20% de opacidad

            if (scrollPercentage > 0) {
                header.style.backdropFilter = `blur(${blurValue}px)`;
                header.style.backgroundColor = `rgba(0, 0, 0, ${bgOpacity / 90})`;
                header.classList.add(
                    "rounded-full",
                    "mx-4",
                    "mt-4",
                    "font-semibold",
                    "shadow-xl",
                    "text-white/100",
                );

                // Ocultar el menú móvil al hacer scroll
                if (mobileMenu && !mobileMenu.classList.contains("opacity-0")) {
                    mobileMenu.classList.add("opacity-0");
                    mobileMenu.classList.add("scale-y-0");
                    mobileMenu.classList.add("pointer-events-none");
                }
            } else {
                header.style.backdropFilter = "none";
                header.style.backgroundColor = "transparent";
                header.classList.remove(
                    "shadow-xl",
                    "rounded-xl",
                    "mx-4",
                    "mt-4",
                    "font-semibold",
                    "text-white/100",
                );
            }
        });
    }
</script>
